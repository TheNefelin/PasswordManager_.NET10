<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PasswordManager_.NET10.Views.Main.PasswordFormPage"
             Title="PasswordFormPage">

    <VerticalStackLayout Spacing="15" Padding="20">

        <!-- Título/Nombre -->
        <VerticalStackLayout Spacing="5">
            <Label Text="Nombre/Título" FontAttributes="Bold"/>
            <Entry Placeholder="ej: Gmail, Facebook..."
                   Text="{Binding Data01}"/>
        </VerticalStackLayout>

        <!-- Usuario -->
        <VerticalStackLayout Spacing="5">
            <Label Text="Usuario/Email" FontAttributes="Bold"/>
            <Entry Placeholder="tu@email.com"
                   Text="{Binding Data02}"/>
        </VerticalStackLayout>

        <!-- Contraseña -->
        <VerticalStackLayout Spacing="5">
            <Label Text="Contraseña" FontAttributes="Bold"/>
            <Grid ColumnDefinitions="*,Auto, auto" ColumnSpacing="5">
                <Entry Grid.Column="0"
                       Placeholder="••••••••"
                       IsPassword="{Binding IsPassword}"
                       Text="{Binding Data03}"/>
                <Button Grid.Column="1"
                       Text="Generar"
                       ImageSource="icon_key_512.png"
                        HeightRequest="50"
                       Padding="10"
                       Command="{Binding GeneratePasswordCommand}"/>
                <Button 
                    Grid.Column="2" 
                    Text="Ver"
                    ImageSource="icon_eye_lock_open_512.png"
                    HeightRequest="50"
                    Command="{Binding ToggleIsPasswordCommand}"/>
            </Grid>
        </VerticalStackLayout>

        <VerticalStackLayout>
            <Label Text="Contraseña de Encriptacion" FontAttributes="Bold"/>
            <Entry Text="{Binding EncryptingPassword}" Placeholder="••••••••" IsPassword="True"/>
        </VerticalStackLayout>

        <!-- Botones de acción -->
        <Grid ColumnDefinitions="*,*" ColumnSpacing="10" Margin="0,20,0,0">
            <Button Grid.Column="0"
                   Text="Guardar"
                   Command="{Binding SavePasswordCommand}"
                   IsEnabled="{Binding IsLoading, Converter={StaticResource InvertedBoolConverter}}"/>
            <Button Grid.Column="1"
                   Text="Cancelar"
                   Command="{Binding CancelCommand}"
                   BackgroundColor="Gray"
                   IsEnabled="{Binding IsLoading, Converter={StaticResource InvertedBoolConverter}}"/>
        </Grid>

        <!-- Loading -->
        <ActivityIndicator IsRunning="{Binding IsLoading}"
                         IsVisible="{Binding IsLoading}"
                         HorizontalOptions="Center"/>

    </VerticalStackLayout>
    
</ContentPage>