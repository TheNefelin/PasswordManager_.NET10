<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PasswordManager_.NET10.Views.Main.PasswordFormPage"
             Title="PasswordFormPage">

    <VerticalStackLayout Spacing="15" Padding="20">

        <!-- Título/Nombre -->
        <VerticalStackLayout Spacing="5">
            <Label Text="Nombre/Título" FontAttributes="Bold"/>
            <Entry Placeholder="ej: Gmail, Facebook..."
                   Text="{Binding Data01}"/>
        </VerticalStackLayout>

        <!-- Usuario -->
        <VerticalStackLayout Spacing="5">
            <Label Text="Usuario/Email" FontAttributes="Bold"/>
            <Entry Placeholder="tu@email.com"
                   Text="{Binding Data02}"/>
        </VerticalStackLayout>

        <!-- Contraseña -->
        <VerticalStackLayout Spacing="5">
            <Label Text="Contraseña" FontAttributes="Bold"/>

            <Grid ColumnDefinitions="*,auto" ColumnSpacing="10">
                <Entry 
                    Grid.Column="0"
                    Placeholder="••••••••"
                    IsPassword="{Binding IsPassword}"
                    Text="{Binding Data03}"/>
                <ImageButton 
                    Grid.Column="1"
                    Source="icon_eye_lock_open_512.png"
                    HeightRequest="50"
                    WidthRequest="50"
                    CornerRadius="8"
                    Padding="8"
                    BackgroundColor="{AppThemeBinding Light=DarkGray}"
                    Command="{Binding ToggleIsPasswordCommand}"/>
            </Grid>

            <Button 
                Text="Generar Contraseña"
                ImageSource="icon_key_512.png"
                BackgroundColor="ForestGreen"
                HeightRequest="50"
                Padding="10"
                Command="{Binding GeneratePasswordCommand}"/>
        </VerticalStackLayout>

        <VerticalStackLayout>
            <Label Text="Clave de Encriptacion" FontAttributes="Bold"/>

            <Grid ColumnDefinitions="*,auto" ColumnSpacing="20">
                <Entry 
                    Grid.Column="0"
                    Text="{Binding EncryptingPassword}" 
                    Placeholder="••••••••" 
                    IsPassword="{Binding IsPasswordEncrypt}"/>
                <ImageButton 
                    Grid.Column="1"
                    Source="icon_eye_lock_open_512.png"
                    HeightRequest="50"
                    WidthRequest="50"
                    CornerRadius="8"
                    Padding="8"
                    BackgroundColor="{AppThemeBinding Light=DarkGray}"
                    Command="{Binding ToggleIsPasswordEncryptCommand}"/>
            </Grid>
        </VerticalStackLayout>

        <!-- Botones de acción -->
        <Grid ColumnDefinitions="*,*" ColumnSpacing="10" Margin="0,20,0,0">
            <Button 
                Grid.Column="0"
                Text="Guardar"
                Command="{Binding SavePasswordCommand}"
                IsEnabled="{Binding IsLoading, Converter={StaticResource InvertedBoolConverter}}"/>
            <Button 
                Grid.Column="1"
                Text="Cancelar"
                Command="{Binding CancelCommand}"
                BackgroundColor="Gray"
                IsEnabled="{Binding IsLoading, Converter={StaticResource InvertedBoolConverter}}"/>
        </Grid>

        <!-- Loading -->
        <ActivityIndicator IsRunning="{Binding IsLoading}"
                         IsVisible="{Binding IsLoading}"
                         HorizontalOptions="Center"/>

    </VerticalStackLayout>
    
</ContentPage>